<form #systemConfigFrom="ngForm" class="compact">
    <section class="form-block" style="margin-top:0px;margin-bottom:0px;">
        <label class="section-title" *ngIf="showSubTitle">{{ 'CONFIG.SCANNING.TITLE' | translate }}</label>
        <div class="form-group">
            <label>{{ 'CONFIG.SCANNING.DB_REFRESH_TIME' | translate }}</label>
            <clr-tooltip *ngIf="!isClairDBFullyReady">
              <clr-icon shape="warning" class="is-warning" size="22"></clr-icon>
              <clr-tooltip-content [clrPosition]="'top-right'" [clrSize]="'md'" *clrIfOpen>
                <span>{{'CONFIG.SCANNING.DB_NOT_READY' | translate }}</span>
              </clr-tooltip-content>
            </clr-tooltip>
            <clr-dropdown *ngIf="isClairDBFullyReady && showScanningNamespaces" style="margin-top:-8px;" class="clr-dropdown-override">
                <button class="btn btn-link btn-font" clrDropdownToggle>
                  {{ updatedTimestamp | date:'MM/dd/y HH:mm:ss' }}
                  <clr-icon shape="caret down"></clr-icon>
                </button>
                <clr-dropdown-menu [clrPosition]="'bottom-right'" style="min-width:300px;">
                    <div *ngFor="let nt of namespaceTimestamps" class="namespace">
                      <span class="label label-info">{{nt.namespace}}</span>
                      <span>{{ convertToLocalTime(nt.last_update) | date:'MM/dd/y HH:mm:ss'}}</span>
                    </div>
                </clr-dropdown-menu>
            </clr-dropdown>
            <span *ngIf="isClairDBFullyReady && !showScanningNamespaces">{{ updatedTimestamp | date:'MM/dd/y HH:mm:ss' }}</span>
        </div>
        <div class="form-group vertical-center normal-wrapper" *ngIf="!isEditMode">
            <span>{{ 'CONFIG.SCANNING.SCAN_ALL' | translate }}</span>
            <span>{{ (scanningType ? 'SCHEDULE.'+ scanningType.toUpperCase(): "") | translate }}</span>
            <span [hidden]="scanningType===SCHEDULE_TYPE.NONE">{{'SCHEDULE.AT' | translate}}</span>
            <span [hidden]="scanningType===SCHEDULE_TYPE.NONE">{{ dailyTime | translate }}</span>
            <button class="btn btn-outline btn-sm"  (click)="editSchedule()" id="editSchedule">{{'BUTTON.EDIT' | translate}}</button>
        </div>
        <div class="form-group vertical-center" *ngIf="isEditMode">
            <label for="scanAllPolicy">{{ 'CONFIG.SCANNING.SCAN_ALL' | translate }}</label>
            <div class="select">
                <select id="scanAllPolicy" name="scanAllPolicy" [disabled]="!editable" [(ngModel)]="scanningType">
                    <option value="none">{{ 'SCHEDULE.NONE' | translate }}</option>
                    <option value="daily">{{ 'SCHEDULE.DAILY' | translate }}</option>
                </select>
            </div>
            <span [hidden]="!showTimePicker">{{'SCHEDULE.AT' | translate}}</span>
            <input type="time" name="dailyTimePicker" required [disabled]="!editable" [hidden]="!showTimePicker" [(ngModel)]="dailyTime" />
            <a href="javascript:void(0)" role="tooltip" aria-haspopup="true" class="tooltip tooltip-top-right">
                <clr-icon shape="info-circle" class="info-tips-icon" size="24"></clr-icon>
                <span class="tooltip-content">{{'CONFIG.TOOLTIP.SCANNING_POLICY' | translate}}</span>
            </a>
            <button class="btn btn-primary btn-sm" (click)="save()">{{'BUTTON.SAVE' | translate}}</button>
            <button class="btn btn-primary btn-sm" (click)="cancel()" >{{'BUTTON.CANCEL' | translate}}</button>
        </div>
        <div class="btn-scan-right btn-scan">
            <button class="btn btn-primary btn-sm" (click)="scanNow()" [disabled]="!scanAvailable">{{ 'CONFIG.SCANNING.SCAN_NOW' | translate }}</button><br>
            <span *ngIf="!scanAvailable">{{ 'CONFIG.SCANNING.NEXT_SCAN' | translate }} {{ nextScanTimestamp | date:'y/MM/dd HH:mm' }}</span>
       </div>
    </section>
</form>